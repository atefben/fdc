fos_elastica:
    clients:
        default: { host: %fos_elastica_host%, port: %fos_elastica_port% }
    indexes:
        fdc:
            client: default
            finder: ~
            settings:
                index:
                    analysis:
                        analyzer:
                            custom_index_analyzer:
                                type:      custom
                                tokenizer: nGram
                                filter:    [lowercase, asciifolding, stopwords_fr, elision, snowball_fr, word_delimiter]
                            custom_search_analyzer:
                                type:      custom
                                tokenizer: standard
                                filter:    [lowercase, asciifolding, stopwords_fr, elision, snowball_fr, word_delimiter]
                            artist_index_analyzer:
                                type:      custom
                                tokenizer: nGram
                                filter:    [lowercase, asciifolding, word_delimiter]
                            artist_search_analyzer:
                                type:      custom
                                tokenizer: standard
                                filter:    [lowercase, asciifolding, word_delimiter]
                        tokenizer:
                            nGram:
                              type:     nGram
                              min_gram: 3
                              max_gram: 20
                        filter:
                            snowball_fr:
                                type:     snowball
                                language: French
                            elision:
                                type:     elision
                                articles: [l, m, t, qu, n, s, j, d]
                            stopwords_fr:
                                type:        stop
                                stopwords:   [_french_]
                                ignore_case: true
            types:
                media:
                    indexable_callback: 'isElasticable'
                    persistence:
                        # the driver can be orm, mongodb, phpcr or propel
                        # listener and finder are not supported by
                        # propel and should be removed
                        model_to_elastica_transformer:
                            service: base.transformers.model.media
                        driver: orm
                        model: Base\CoreBundle\Entity\Media
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\MediaRepository
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        webTv.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        theme.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                photo:
                    indexable_callback: 'isElasticable'
                    persistence:
                        # the driver can be orm, mongodb, phpcr or propel
                        # listener and finder are not supported by
                        # propel and should be removed
                        model_to_elastica_transformer:
                            service: base.transformers.model.media
                        driver: orm
                        model: Base\CoreBundle\Entity\MediaImage
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\MediaImageRepository
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        webTv.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        theme.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                video:
                    indexable_callback: 'isElasticable'
                    persistence:
                        # the driver can be orm, mongodb, phpcr or propel
                        # listener and finder are not supported by
                        # propel and should be removed
                        model_to_elastica_transformer:
                            service: base.transformers.model.media
                        driver: orm
                        model: Base\CoreBundle\Entity\MediaVideo
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\MediaVideoRepository
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        webTv.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        theme.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                audio:
                    indexable_callback: 'isElasticable'
                    persistence:
                        # the driver can be orm, mongodb, phpcr or propel
                        # listener and finder are not supported by
                        # propel and should be removed
                        model_to_elastica_transformer:
                            service: base.transformers.model.media
                        driver: orm
                        model: Base\CoreBundle\Entity\MediaAudio
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\MediaAudioRepository
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        webTv.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        theme.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                event:
                    persistence:
                        model_to_elastica_transformer:
                            service: base.transformers.model.event
                        driver: orm
                        model: Base\CoreBundle\Entity\Event
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\EventRepository
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 120, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                introduction: { boost: 100, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                status: ~
                        theme.translations:
                            type: nested
                            properties :
                                name: { boost: 110, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~

                info:
                    persistence:
                        # the driver can be orm, mongodb, phpcr or propel
                        # listener and finder are not supported by
                        # propel and should be removed
                        model_to_elastica_transformer:
                            service: base.transformers.model.info
                        driver: orm
                        model: Base\CoreBundle\Entity\Info
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\InfoRepository
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                introduction: { search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        theme.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                statement:
                    persistence:
                        # the driver can be orm, mongodb, phpcr or propel
                        # listener and finder are not supported by
                        # propel and should be removed
                        model_to_elastica_transformer:
                            service: base.transformers.model.statement
                        driver: orm
                        model: Base\CoreBundle\Entity\Statement
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\StatementRepository
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                introduction: { search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        theme.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~

                participate:
                    persistence:
                        driver: orm
                        model: Base\CoreBundle\Entity\FDCPageParticipate
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\FDCPageParticipateRepository
                    mappings:
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                content: { search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        downloadSection:
                            type: nested
                            properties :
                                section.translations:
                                    type: nested
                                    properties :
                                        title: { boost: 5, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        description: { search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~

                film:
                    persistence:
                        model_to_elastica_transformer:
                            service: base.transformers.model.film
                        driver: orm
                        model: Base\CoreBundle\Entity\FilmFilm
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\FilmFilmRepository
                    mappings:
                        selectionSection: { search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                        festival.year: ~
                        titleVO: { boost: 60, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                        countries:
                            type: nested
                            properties :
                                country.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                        awards:
                            type: nested
                            properties:
                                award.prize.translations:
                                    type: nested
                                    properties:
                                        title: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                        translations:
                            type: nested
                            properties :
                                title: { boost: 60, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                news:
                    indexable_callback: 'isElasticable'
                    persistence:
                        model_to_elastica_transformer:
                            service: base.transformers.model.news
                        driver: orm
                        model: Base\CoreBundle\Entity\News
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\NewsRepository
                        model_to_elastica_transformer:
                            service: base.transformers.model.nullable
                    mappings:
                        publishedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                introduction: { search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                status: ~
                        theme.translations:
                            type: nested
                            property_path:
                                theme.translations
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        tags:
                            type: nested
                            properties :
                                tag.translations:
                                    type: nested
                                    properties :
                                        name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~

                artist:
                    indexable_callback: 'isElasticable'
                    persistence:
                        driver: orm
                        model: Base\CoreBundle\Entity\FilmPerson
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\FilmPersonRepository
                    mappings:
                        firstname: { boost: 20, search_analyzer: artist_search_analyzer, index_analyzer: artist_index_analyzer, type: string }
                        lastname: { boost: 20, search_analyzer: artist_search_analyzer, index_analyzer: artist_index_analyzer, type: string }
                        nationality: { boost: 0, search_analyzer: artist_search_analyzer, index_analyzer: artist_index_analyzer, type: string }
                        films:
                            type: nested
                            properties:
                                film.festival.year: ~
                                film.translations:
                                    type: nested
                                    properties:
                                        title: { search_analyzer: artist_search_analyzer, index_analyzer: artist_index_analyzer, type: string }
                                        locale: ~
                        translations:
                            type: nested
                            properties :
                                profession: { boost: 5, search_analyzer: artist_search_analyzer, index_analyzer: artist_search_analyzer, type: string }
                                locale: ~
                                status: ~

                country:
                    persistence:
                        driver: orm
                        model: Base\CoreBundle\Entity\Country
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: Base\CoreBundle\SearchRepository\CountryRepository
                    mappings:
                        translations:
                            type: nested
                            properties :
                                name: { boost: 5, search_analyzer: custom_search_analyzer, index_analyzer: custom_search_analyzer, type: string }
                                locale: ~
                                status: ~
        fdc_mdf:
            client: default
            finder: ~
            settings:
                index:
                    analysis:
                        analyzer:
                            custom_index_analyzer:
                                type:      custom
                                tokenizer: nGram
                                filter:    [lowercase, asciifolding, stopwords_fr, elision, snowball_fr, word_delimiter]
                            custom_search_analyzer:
                                type:      custom
                                tokenizer: standard
                                filter:    [lowercase, asciifolding, stopwords_fr, elision, snowball_fr, word_delimiter]
                        tokenizer:
                            nGram:
                              type:     nGram
                              min_gram: 3
                              max_gram: 20
                        filter:
                            snowball_fr:
                                type:     snowball
                                language: French
                            elision:
                                type:     elision
                                articles: [l, m, t, qu, n, s, j, d]
                            stopwords_fr:
                                type:        stop
                                stopwords:   [_french_]
                                ignore_case: true
            types:
                content:
                    persistence:
                        driver: orm
                        model: FDC\MarcheDuFilmBundle\Entity\MdfContentTemplate
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        elastica_to_model_transformer:
                            ignore_missing: true
                        model_to_elastica_transformer:
                             service: mdf.transformers.content_to_elastica_transformer
                        repository: FDC\MarcheDuFilmBundle\SearchRepository\MdfContentTemplateRepository
                    mappings:
                        publishedAt: { type: date }
                        publishEndedAt: { type: date }
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                                header: { search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                        theme.translations:
                            type: nested
                            properties :
                                title: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        contentTemplateWidgets:
                            type: nested
                            properties :
                                translations:
                                    type: nested
                                    properties :
                                        title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        contentText: ~
                                        locale: ~
                media:
                    persistence:
                        driver: orm
                        model: FDC\MarcheDuFilmBundle\Entity\MdfContentTemplateWidget
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        elastica_to_model_transformer:
                            ignore_missing: true
                        repository: FDC\MarcheDuFilmBundle\SearchRepository\MdfContentTemplateWidgetRepository
                        model_to_elastica_transformer:
                             service: mdf.transformers.media_to_elastica_transformer
                    mappings:
                        id: ~
                        # mapping for MdfContentTemplateWidgetGallery objects
                        gallery.translations:
                            type: nested
                            properties:
                                locale: ~
                                name: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                createdAt: { type: date }
                        # mapping for MdfContentTemplateWidgetImage objects
                        image:
                            type: nested
                            properties:
                                publishedAt: { type: date }
                                translations:
                                    type: nested
                                    properties :
                                        alt: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        legend: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                                        status: ~
                                        createdAt: { type: date }
                                theme.translations:
                                    type: nested
                                    properties :
                                        title: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                        locale: ~
                                tags:
                                    type: nested
                                    properties :
                                        tag.translations:
                                            type: nested
                                            properties:
                                                name: ~
#                        # mapping for MdfContentTemplateWidgetVideo objects
                        translations:
                            type: nested
                            properties :
                                title: { boost: 20, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                        theme.translations:
                            type: nested
                            properties :
                                title: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
                document:
                    persistence:
                        driver: orm
                        model: FDC\MarcheDuFilmBundle\Entity\MdfContentTemplateWidgetFile
                        provider: ~
                        listener:
                            immediate: ~
                        finder: ~
                        repository: FDC\MarcheDuFilmBundle\SearchRepository\MdfContentTemplateWidgetFileRepository
                    mappings:
                        file.translations:
                            type: nested
                            properties :
                                name: { boost: 10, search_analyzer: custom_search_analyzer, index_analyzer: custom_index_analyzer, type: string }
                                locale: ~
