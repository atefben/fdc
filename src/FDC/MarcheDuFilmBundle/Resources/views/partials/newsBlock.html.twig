<div class="our-news dynamic customClass3Bckg">
    <span>DECOUVREZ</span>
    <h3>les derniÈrEs actualités</h3>
    <div class="innerWrapper">
        {% for newsItem in news %}
            {% set newsDecription = '' %}
            {% set newsDescriptionLength =  (newsItem['content'].title|length / 30)|round(0 , 'floor') %}

            {% if newsItem['content'].header is not empty %}
                {% set newsDecription = newsItem['content'].header %}
            {% elseif newsItem['text'] is not empty %}
                {% set newsDecription = newsItem['text'][0].contentText %}
            {% endif %}

            <a href="{{ path('fdc_marche_du_film_news_details', {'slug': newsItem['content'].slug}) }}">
                <div class="articles {% if loop.index == 3 %}noShow{% endif %}">
                    <div class="readMore">...</div>
                    {% if newsItem['image'] is not empty %}
                        <div class="articles-img"><img src="{% path newsItem['image'][0].image|trans_fallback('file'), 'reference' %}"></div>
                    {% endif %}
                    <div class="articles-content">
                        <span class="customClass4">{{ newsItem['content'].translatable.theme.findTranslationByLocale(app.request.locale).title }} <span class="article-date">{{ newsItem['content'].translatable.publishedAt|date("d M Y") }}</span></span>
                        <h6>{{ newsItem['content'].title }}</h6>
                        {% if newsDecription|striptags|length > 225 %}
                            {% if newsItem['image'] is not empty %}
                                {% set description = newsDecription|truncate(350 - (newsDescriptionLength * 70), true, "...</p>") %}
                            {% else %}
                                {% set description = newsDecription|truncate(850 - (newsDescriptionLength * 90), true, "...</p>") %}
                            {% endif %}
                        {% else %}
                            {% set description = newsDecription %}
                        {% endif %}
                        {{ description|raw }}
                    </div>
                </div>
            </a>
        {% endfor %}
    </div>
</div>
