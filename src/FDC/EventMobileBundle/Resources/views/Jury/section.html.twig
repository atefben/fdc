{% trans_default_domain 'FDCEventBundle' %}
{% extends 'FDCEventMobileBundle::layout.html.twig' %}

{% block body %}

    <div id="main" class="list-article jurys-list loading">
        <div class="bandeau-list">
            <div class="bandeau-list-img bandeau-head vCenter"
                 style="background-image:url('{% path page.image|trans_fallback('file'), '2560x1103' %}')">
                <div class="vCenterKid">
                    <h2 class="title title-list-header">{{ (page|trans_fallback('overrideName'))?:(page.juryType|trans_fallback('name')) }}</h2>
                </div>
            </div>
            <div id="horizontal-menu" class="owl-carousel sliderDrag videosSlider sub-nav-list">
                {% for tab in pages %}
                    <div class="vid">
                        <p><a href="{{ path('fdc_event_jury_get', {'slug': tab|trans_fallback('slug')}) }}"
                           class="{% if app.request.attributes.get('slug') == (tab|trans_fallback('slug')) %}active {% endif %}ajax">
                            {{ (tab|trans_fallback('overrideName'))?:(tab.juryType|trans_fallback('name')) }}
                        </a></p>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="container-jurys">
            <div class="container container-list">
                <section class="categorie-items contain-jury">
                    {% if president %}
                        <a href="{{ path('fdc_event_artist_get', {'slug': president['jury'].person.slug}) }}">
                            {% if president['jury'].person.presidentJuryImage and president['jury'].person.presidentJuryImage|trans_fallback('file') %}
                                <div class="photo-jury"
                                     style="background-image:url({% path president['jury'].person.presidentJuryImage|trans_fallback('file'), '640x603' %})">
                                </div>
                            {% else %}
                                {% set media = president['jury'].person|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_JURY'))|first %}
                                {% if media is empty %}
                                    {% set media = president['jury'].person|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_PERSON'))|first %}
                                {% endif %}
                                {% if media is empty %}
                                    {% set photo = president['jury'].person|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_DIRECTOR'))|first %}
                                {% endif %}

                                {% if media is not empty %}
                                    <div class="photo-jury"
                                        style="background-image:url({% path media, '640x603' %})">
                                    </div>
                                {% else %}
                                    <div class="photo-jury"
                                         style="background-image:url('{{ asset('bundles/fdcevent/img/jurys/president.jpg') }}');">
                                    </div>
                                {% endif %}
                            {% endif %}
                        </a>
                    {% endif %}
                </section>
                <section class="categorie-items contain-jurys-list grid">
                    <h1 class="title-list-cat title">
                        {% if page.id == admin_fdc_page_jury_certain_regard_id %}
                            {{ 'juries.role.title.membresdujury.regard'|trans }}
                        {%  elseif page.id == admin_fdc_page_jury_camera_dor_id %}
                            {{ 'juries.role.title.membresdujury.camera'|trans }}
                        {%  elseif page.id == admin_fdc_page_jury_long_metrages_id %}
                            {{ 'juries.role.title.membresdujury.long'|trans }}
                        {%  elseif page.id == admin_fdc_page_jury_cinefondation_courts_metrages_id %}
                            {{ 'juries.role.title.membresdujury.court'|trans }}
                        {%  endif %}
                    </h1>
                    <div id="gridJurys" class="grid-wrapper">
                        <div class="grid-sizer"></div>
                        {% for member in members %}
                            <div class="jury-box item">
                                <a href="{{ path('fdc_event_artist_get', {'slug': member['jury'].person.slug}) }}">
                                    <div class="image">
                                        {% if member['jury'].person.portraitImage and member['jury'].person.portraitImage|trans_fallback('file') %}
                                            <img src="{% path member['jury'].person.portraitImage|trans_fallback('file'), '384x485' %}"
                                                 alt="{{ member['jury'].person.firstname }} {{ member['jury'].person.lastname }}">
                                        {% else %}
                                            {% set media = member['jury'].person|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_JURY'))|first %}
                                            {% if media is empty %}
                                                {% set media = member['jury'].person|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_PERSON'))|first %}
                                            {% endif %}
                                            {% if media is empty %}
                                                {% set photo = member['jury'].person|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_DIRECTOR'))|first %}
                                            {% endif %}

                                            {% if media is not empty %}
                                                <img src="{% path media, '384x485' %}"
                                                     alt="{{ member['jury'].person.firstname }} {{ member['jury'].person.lastname }}">
                                            {% else %}
                                                <img src="{{ asset('bundles/fdcevent/img/jurys/member.jpg') }}"
                                                    alt="{{ member['jury'].person.firstname }} {{ member['jury'].person.lastname }}">
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    <div class="legend">
                                        <span class="name">{{ member['jury'].person.firstname }} {{ member['jury'].person.lastname }}</span>
                                        {% set profession =  member['jury'].person|trans_fallback('profession') %}
                                        {% if profession %}
                                            <span class="rank" {{ member['jury'].person|content_lang('profession') }}>
                                                {{ profession }}
                                            </span>
                                        {% endif %}
                                    </div>
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </section>
            </div>
            {% if next %}
                <div class="bandeau-list push-footer vCenter">
                    <div class="bandeau-list-img  bandeau-list-footer vCenterKid"
                         style="background-image:url({% path next.image|trans_fallback('file'), '2560x1103' %})">
                        <h2 class="title title-list-header">{{ (next|trans_fallback('overrideName'))?:(next.juryType|trans_fallback('name')) }}</h2>
                        <a href="{{ path('fdc_event_jury_get', {'slug': next|trans_fallback('slug')?:next.selectionSection|trans_fallback('slug')} ) }}" class="bandeau-lien">
                            <i class="icon icon_fleche-right"></i>
                            {{ 'juries.btn.decouvrirrubrique'|trans }}
                        </a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock body %}