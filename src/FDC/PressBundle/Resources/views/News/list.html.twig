{% trans_default_domain 'FDCPressBundle' %}
{% extends 'FDCPressBundle::layout.html.twig' %}
{% block body %}
<div id="main" class="press loading press-actu lock all-articles grid">

    {% include 'FDCPressBundle:Global:components/headerPress.html.twig' %}

    <div class="container-pressactu">

        {% include 'FDCPressBundle:News:components/filters.html.twig' %}

        <div id="gridAudios" class="grid-wrapper" data-type="articles">
            <div class="grid-sizer"></div>

            {% for article in statementArticles %}
                {% if article is statement_article %}
                    <div class="item all article {{ article.theme.slug }}">
                        <article class="article">
                            <div class="img">
                                <span class="picto"><i class="icon icon_communique-presse"></i></span>
                                <a href="{{ path('fdc_press_news_get', {'slug': article|trans_fallback('slug') }) }}">
                                    {% set trans = article.header.findTranslationByLocale(app.request.locale) %}
                                    {% if trans is null or trans.file is null %}
                                        {% set trans = article.header.findTranslationByLocale('fr') %}
                                    {% endif %}
                                    {% set file = trans.file %}
                                    {% thumbnail file, 'big' with {'alt': article.header|trans_fallback('alt') } %}
                                </a>
                            </div>
                            <div class="info">
                                <a href="#" class="category">{{ article.theme }}</a>
                                <span class="date">{{ article.createdAt|date('d.m.y') }}</span> . <span class="hour">{{ article.createdAt|date('H:i') }}</span>
                                <h3><a href="{{ path('fdc_press_news_get', {'slug': article.id }) }}">{{ article.title }}</a></h3>
                            </div>
                        </article>
                    </div>
                {% elseif article is statement_audio %}
                    <div class="item all audio">
                        <article class="article">
                            <div class="img">
                                <span class="picto"><i class="icon icon_communique-presse"></i></span>
                                <a href="{{ path('fdc_press_news_get', {'slug': article|trans_fallback('slug') }) }}">
                                    {% set trans = article.audio.findTranslationByLocale(app.request.locale) %}
                                    {% if trans is null or trans.file is null %}
                                        {% set trans = article.audio.findTranslationByLocale('fr') %}
                                    {% endif %}
                                    {% set file = article.audio %}
                                    {% thumbnail file, 'big' with {'alt': article.audio|trans_fallback('alt') } %}
                                </a>
                            </div>
                            <div class="info">
                                <a href="#" class="category">{{ article.theme }}</a>
                                <span class="date">{{ article.createdAt|date('d.m.y') }}</span> . <span class="hour">{{ article.createdAt|date('H:i') }}</span>
                                <h3><a href="{{ path('fdc_press_news_get', {'slug': article.id }) }}">{{ article.title }}</a></h3>
                            </div>
                        </article>
                    </div>
                {% elseif article is statement_video %}
                    <div class="item all video">
                        <article class="article">
                            <div class="img">
                                <span class="picto"><i class="icon icon_communique-presse"></i></span>
                                <a href="{{ path('fdc_press_news_get', {'slug': article|trans_fallback('slug') }) }}">
                                    {% set trans = article.video.findTranslationByLocale(app.request.locale) %}
                                    {% if trans is null or trans.file is null %}
                                        {% set trans = article.video.findTranslationByLocale('fr') %}
                                    {% endif %}
                                    {% set file = article.video %}

                                    {% thumbnail file, 'big' with {'alt': article.video|trans_fallback('alt') } %}
                                </a>
                            </div>
                            <div class="info">
                                <a href="#" class="category">{{ article.theme }}</a>
                                <span class="date">{{ article.createdAt|date('d.m.y') }}</span> . <span class="hour">{{ article.createdAt|date('H:i') }}</span>
                                <h3><a href="{{ path('fdc_press_news_get', {'slug': article.id }) }}">{{ article.title }}</a></h3>
                            </div>
                        </article>
                    </div>
                {% elseif article is statement_image %}
                    <div class="item all image">

                        {% for gallery in article.gallery.medias %}
                            {% if loop.first %}
                                {% set trans = gallery.media.findTranslationByLocale(app.request.locale) %}
                                {% if trans is null or trans.file is null %}
                                    {% set trans = gallery.media.file.findTranslationByLocale('fr') %}
                                {% endif %}
                                {% set file = trans.file %}
                            {% endif %}
                        {% endfor %}

                        <article class="article">
                            <div class="img">
                                <span class="picto"><i class="icon icon_communique-presse"></i></span>
                                <a href="{{ path('fdc_press_news_get', {'slug': article|trans_fallback('slug') }) }}">
                                    {% thumbnail file, 'big' with {'alt': 'test' } %}
                                </a>
                            </div>
                            <div class="info">
                                <a href="#" class="category">{{ article.theme }}</a>
                                <span class="date">{{ article.createdAt|date('d.m.y') }}</span> . <span class="hour">{{ article.createdAt|date('H:i') }}</span>
                                <h3><a href="{{ path('fdc_press_news_get', {'slug': article.id }) }}">{{ article.title }}</a></h3>
                            </div>
                        </article>
                    </div>
                {% endif %}


            {% endfor %}


        </div>
        <a href="#" class="read-more">
            {{ 'press.actu.btn.afficherplusdarticles'|trans|raw }}
        </a>

        <div class="section" style="background-image:url({{ asset('bundles/fdcevent/img/press/pushactu.jpg') }})">
            <div class="img"></div>
            <div class="txt vCenter">
                <div class="vCenterKid">
                    <h2 class="title">{{ 'press.actu.title.lactualitealaune'|trans }}</h2>
                    <p class="link">
                        <a href="#">
                            {% image '@FDCEventBundle/Resources/public/img/svg/arrow-right-gold.svg' %}
                            <img src="{{ asset_url }}" alt="{{ 'press.actu.btn.suivezlamanifestation'|trans }}" />
                            {% endimage %}
                            {{ 'press.actu.btn.suivezlamanifestation'|trans }}
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    {{ render(controller('FDCPressBundle:Global:contact')) }}

</div>
{% endblock %}