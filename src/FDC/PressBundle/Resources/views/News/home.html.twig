{% trans_default_domain 'FDCPressBundle' %}
{% extends 'FDCPressBundle::layout.html.twig' %}

{% block body %}
{% if is_granted("ROLE_FDC_PRESS_REPORTER") %}
<div id="main" class="press press-home calendar-open conected">
{% else %}
<div id="main" class="press press-home calendar-open lock">
{% endif %}

    {% include 'FDCPressBundle:Global:components/headerPress.html.twig' %}

    {{ render(controller('FDCPressBundle:Security:login')) }}

    <div class="wrapper">

        {% include 'FDCPressBundle:News:components/calendar.html.twig' %}

        <div class="communiques">
            <div class="chap">
                <h3 class="title-press">{{ 'press.agenda.title.communiqueetinfos'|trans }}</h3>
                <p class="link">
                    <a href="press-actu.php">
                        <i class="icon icon_fleche-right"></i>
                        {{ 'press.home.btn.touslescommuniquesetinfos'|trans }}
                    </a>
                </p>
            </div>
            <div class="grid-container">
                <div class="grid-wrapper">
                    {% for article in homeNews %}
                        {% include 'FDCPressBundle:News:widgets/article.html.twig' %}
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="programmation">
            <div class="chap">
                <h3 class="title-press">
                    {{ 'press.home.title.programmedu'|trans }}
                    <span id="dateProgram">{{ "now"|localizeddate('long', 'none', app.request.locale)  }}</span>
                </h3>
                <p class="link">
                    <a href="programmation.php">
                        <i class="icon icon_fleche-right"></i>
                        {{ 'press.home.btn.toutelaprogrammation'|trans }}
                    </a>
                </p>
            </div>
            <div id="calendar-programmation">
                <div id="timeline">
                    {% for day in schedulingDays %}
                        <a href="#" class=""
                           data-date="{{ day|date('Y-m-d') }}">
                            {{ day|localizeddate('full', 'none', app.request.locale)|truncate(3, false, "") }}
                            <span class="day">{{ day|date('d') }}
                            </span>
                        </a>
                    {% endfor %}
                </div>
                <div class="calendar">
                    <div class="timeCol">
                        {% set currentHour = "now"|date('H') %}
                        <div class="empty"></div>
                        <div class="time">{{ currentHour }}</div>
                        <div class="time">{{ currentHour + 1}}</div>
                        <div class="time">{{ currentHour + 2}}</div>
                        <div class="time">{{ currentHour + 3}}</div>
                        <div class="time">{{ currentHour + 4}}</div>
                        <div class="time">{{ currentHour + 5}}</div>
                    </div>
                    <div class="venues">
                        <a href="#" class="nav prev"><i class="icon icon_flecheGauche"></i></a>
                        <a href="#" class="nav next"><i class="icon icon_fleche-right"></i></a>
                        <div class="v-wrapper">
                            <div class="venue">
                                <div class="v-head">{{ 'press.home.salle.grandtheatrelumi√®re'|trans }}</div>
                                <div class="v-container">
                                    {#{% if schedulingEvents.place.grandTheatre is defined %}#}
                                        {#{% for event in schedulingEvents.place.grandTheatre.events %}#}
                                            {#{% include 'FDCEventBundle:Agenda:widgets/event.html.twig' %}#}
                                        {#{% endfor %}#}
                                    {#{% endif %}#}
                                </div>
                            </div>
                            <div class="venue">
                                <div class="v-head">{{ 'press.home.salle.salledebussy'|trans }}</div>
                                <div class="v-container">
                                    {#{% if schedulingEvents.place.salleDebussy is defined %}#}
                                        {#{% for event in schedulingEvents.place.salleDebussy.events %}#}
                                            {#{% include 'FDCEventBundle:Agenda:widgets/event.html.twig' %}#}
                                        {#{% endfor %}#}
                                    {#{% endif %}#}
                                </div>
                            </div>
                            <div class="venue">
                                <div class="v-head">{{ 'press.home.salle.salledu60e'|trans }}</div>
                                <div class="v-container">
                                    {#{% if schedulingEvents.place.salle60 is defined %}#}
                                        {#{% for event in schedulingEvents.place.salle60.events %}#}
                                            {#{% include 'FDCEventBundle:Agenda:widgets/event.html.twig' %}#}
                                        {#{% endfor %}#}
                                    {#{% endif %}#}
                                </div>
                            </div>
                            <div class="venue">
                                <div class="v-head">{{ 'press.home.salle.sallebunuel'|trans }}</div>
                                <div class="v-container">
                                    {#{% if schedulingEvents.place.salleBunuel is defined %}#}
                                        {#{% for event in schedulingEvents.place.salleBunuel.events %}#}
                                            {#{% include 'FDCEventBundle:Agenda:widgets/event.html.twig' %}#}
                                        {#{% endfor %}#}
                                    {#{% endif %}#}
                                </div>
                            </div>
                            <div class="venue">
                                <div class="v-head">{{ 'press.home.salle.sallebunuel'|trans }}</div>
                                <div class="v-container">
                                    {#{% if schedulingEvents.place.salleBunuel is defined %}#}
                                        {#{% for event in schedulingEvents.place.salleBunuel.events %}#}
                                            {#{% include 'FDCEventBundle:Agenda:widgets/event.html.twig' %}#}
                                        {#{% endfor %}#}
                                    {#{% endif %}#}
                                </div>
                            </div>
                            <div class="venue">
                                <div class="v-head">{{ 'press.home.salle.sallebunuel'|trans }}</div>
                                <div class="v-container">
                                    {#{% if schedulingEvents.place.salleBunuel is defined %}#}
                                        {#{% for event in schedulingEvents.place.salleBunuel.events %}#}
                                            {#{% include 'FDCEventBundle:Agenda:widgets/event.html.twig' %}#}
                                        {#{% endfor %}#}
                                    {#{% endif %}#}
                                </div>
                            </div>
                            <div class="venue">
                                <div class="v-head">{{ 'press.home.salle.sallebunuel'|trans }}</div>
                                <div class="v-container">
                                    {#{% if schedulingEvents.place.salleBunuel is defined %}#}
                                        {#{% for event in schedulingEvents.place.salleBunuel.events %}#}
                                            {#{% include 'FDCEventBundle:Agenda:widgets/event.html.twig' %}#}
                                        {#{% endfor %}#}
                                    {#{% endif %}#}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mediatheque">
            <div class="chap">
                <h3 class="title-press">{{ 'press.home.title.mediatheque'|trans }}</h3>
                <p class="link">
                    <a href="press-media.php">
                        <i class="icon icon_fleche-right"></i>
                        {{ 'press.home.btn.toutelamediatheque'|trans }}
                    </a>
                </p>
            </div>
            <div class="table">
                {% for media in pressHome.homeMedia %}
                    <div class="line">
                        <div class="container">
                            <div class="info">
                                {% media media.film|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_MAIN'))|first, 'film_poster_small' %}
                                <div class="txt">
                                    <div class="vCenter">
                                        <div class="vCenterKid">
                                            <p>
                                                {{ media.film|trans_fallback('title') }}
                                                {% for director in media.film|film_function(constant('Base\\CoreBundle\\Entity\\FilmFunction::FUNCTION_DIRECTOR')) %}
                                                    <a class="director" href="{{ path('fdc_event_artist_get', {slug: director.slug }) }}">{{ director.fullName }}</a>
                                                {% endfor %}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="media folder">
                                <span>{{ 'press.home.label.dossiersdepresse'|trans }}</span> ({{ media.film.medias|length }})
                            </div>
                            <div class="media trailer"><span>{{ 'press.home.label.bandeannonces'|trans }}</span> ({{ media.film.mediaVideos|length }}) </div>
                            <div class="media photo"><span>{{ 'press.home.label.photos'|trans }}</span> ({{ media.film.mediaPhoto|length }})</div>
                            <a class="button" href="press-media.php">
                                {{ 'press.home.btn.decouvrir'|trans }}
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="download">
            <div class="chap">
                <h3 class="title-press">{{ 'press.home.title.atelecharger'|trans }}</h3>
                <p class="link">
                    <a href="press-telecharger.php">
                        <i class="icon icon_fleche-right"></i>
                        {{ 'press.home.btn.touslestelechargements'|trans }}
                    </a>
                </p>
            </div>
        </div>
        {% for section in pressHome.homeDownload %}
            <div class="affiche">
                <div class="container">
                    <h3 class="title-press">{{ section.download|trans_fallback('title') }}</h3>
                    {% for widget in section.download.widgets %}
                        {% if class(widget) == "PressDownloadSectionWidgetDocument" %}
                            {% include 'FDCPressBundle:Media:widgets/document.html.twig' %}
                        {% elseif class(widget) == "PressDownloadSectionWidgetFile" %}

                        {% elseif class(widget) == "PressDownloadSectionWidgetPhoto" %}

                        {% elseif class(widget) == "PressDownloadSectionWidgetVideo" %}

                        {% endif %}
                    {% endfor %}

                </div>
            </div>
        {% endfor %}

        {% set trans = pressHome.pushMainImage.findTranslationByLocale(app.request.locale) %}
        {% if trans is null or trans.file is null %}
            {% set trans = push.findTranslationByLocale('fr') %}
        {% endif %}
        <div class="section participate">
            <div class="img" style="background-image: url({% path trans.file, '1980x300' %})"></div>
            <div class="txt vCenter">
                <div class="vCenterKid">
                    <h2 class="title">{{ pressHome|trans_fallback('pushMainTitle') }}</h2>
                    <p class="link">
                        <a href="{{ pressHome|trans_fallback('pushMainLink') }}">
                            <i class="icon icon_fleche-right"></i>
                            {{ 'press.home.btn.acceder'|trans }}
                        </a>
                    </p>
                </div>
            </div>
        </div>
        {% set trans = pressHome.pushSecondaryImage.findTranslationByLocale(app.request.locale) %}
        {% if trans is null or trans.file is null %}
            {% set trans = push.findTranslationByLocale('fr') %}
        {% endif %}
        <div class="section accrediter">
            <div class="img" style="background-image: url({% path trans.file, '1980x300' %})"></div>
            <div class="txt vCenter">
                <div class="vCenterKid">
                    <h2 class="title">{{ pressHome|trans_fallback('pushSecondaryTitle') }}</h2>
                    <p class="link">
                        <a href="{{ pressHome|trans_fallback('pushSecondaryLink') }}">
                            <i class="icon icon_fleche-right"></i>
                            {{ 'press.home.btn.acceder'|trans }}
                        </a>
                    </p>
                </div>
            </div>
        </div>

        {#<div class="stats">#}
            {#<div class="chap">#}
                {#<h3 class="title-press">{{ 'press.home.title.statistiques'|trans }}</h3>#}
            {#</div>#}
            {#<div class="container">#}
                {#<h3>{{ pressStats.title }}</h3>#}
                {#<p>#}
                    {#{{ pressStats.description }}#}
                {#</p>#}
                {#<p>#}
                    {#<img src="{{ pressStats.image.path }}" alt="" />#}
                {#</p>#}
            {#</div>#}
        {#</div>#}
    </div>

    {{ render(controller('FDCPressBundle:Global:contact')) }}

</div>

{% include 'FDCPressBundle:Global:components/popinPress.html.twig' %}

{% include 'FDCPressBundle:Global:components/popinDownload.html.twig' %}

{% endblock %}