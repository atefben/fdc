{% trans_default_domain 'FDCEventBundle' %}
{% extends 'FDCEventBundle::layout.html.twig' %}

{% block body %}
<div id="main" class="all-articles grid loading">
    <span id="addtext">{{ 'article.list.text.ajouterselection'|trans }}</span>
    <h2 class="title">{{ 'article.list.title.touslesarticles'|trans }}</h2>

    {% include 'FDCEventBundle:News:components/filters.html.twig' %}

    <div id="gridAudios" class="grid-wrapper" data-type="articles">
        <div class="grid-sizer"></div>

        {% for article in articles %}
            <div class="item {{ article.theme|trans_fallback('slug') }} {{ article.publishedAt|date('d-m-y') }} article">
                <article class="article" data-format="article">
                    <div class="img">
                        <span class="picto">
                            <i class="icon icon_article"></i>
                        </span>
                        <a href="{{ path('fdc_event_news_get', {'format': article.newsFormat, 'slug': article|trans_fallback('slug') }) }}">
                         {% if article.image is not null %}
                            {% set trans = article.image.findTranslationByLocale(app.request.locale) %}
                            {% if trans is null or trans.file is null %}
                                {% set trans = article.image.findTranslationByLocale('fr') %}
                            {% endif %}
                             <img src="{% path trans.file , '1144x724' %}" alt="">
                         {% endif %}
                        </a>
                        <a href="#" class="read-later">
                            <i class="icon icon_lire-plus-tard"></i>
                            <span>{{ 'article.list.btn.ajouteramaselection'|trans }}</span>
                        </a>
                    </div>
                    <div class="info">
                        <span class="category">{{ article.theme|trans_fallback('name') }}</span>
                        <span class="date">{{ article.publishedAt|date('d.m.y') }}</span> . <span class="hour">{{ article.publishedAt|date('H:i') }}</span>
                        <h3>
                            <a href="{{ path('fdc_event_news_get', {'format': article.translatable.newsFormat, 'slug': article|trans_fallback('slug') }) }}">
                                {{ article|trans_fallback('title')|truncate(40) }}
                            </a>
                        </h3>
                    </div>
                </article>
            </div>
        {% endfor %}
    </div>
</div>

{% include "FDCEventBundle:Global:breadcrumb.html.twig" with
{"breadcrumb":
[
    {
        "name" : 'header.mainnav.nav.jourapresjour'|trans ,
        "url"  : path('fdc_event_news_index')
    },
    {
        "name" : 'header.mainnav.nav.articles'|trans ,
        "url"  : path('fdc_event_news_getarticles')
    },
]
} %}

{% endblock %}