{% trans_default_domain 'FDCEventBundle' %}

<div class="competition">
    <h2 class="title">{{ movie.selectionSection|trans_fallback('name') }} {{ "now"|date('Y') }}</h2>
    <div id="slider-competition" class="owl-carousel sliderDrag">
        {% for movie in movies %}
            {% set posterImg = movie|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_POSTER'))|first %}
            {% set mainImg = movie|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_MAIN'))|first %}
            {% set filmImg = movie|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_FILM'))|first %}
            {% set media = '' %}
            {% if posterImg %}
                {% set media = posterImg %}
                {% set format =  '210x284' %}
            {% elseif mainImg %}
                {% set media = mainImg %}
                {% set format = '210x284' %}
            {% elseif filmImg %}
                {% set media = filmImg %}
                {% set format = '210x284' %}
            {% endif %}
            <div class="slide">
                {% if media is not empty %}
                <a href="{{ path('fdc_event_movie_get', {'slug': movie.slug}) }}" class="linkVid">
                    {% media media, format %}
                </a>
                {% else %}
                <a href="{{ path('fdc_event_movie_get', {'slug': movie.slug}) }}" class="linkVid">
                    <img src="{{ asset('bundles/fdcevent/img/palmares/film_w210.jpg') }}" alt="">
                </a>
                {% endif %}
                <div class="info-movie">
                    <p>
                        <a href="{{ path('fdc_event_movie_get', {'slug': movie.slug}) }}">
                            {% if movie|trans_fallback('title') is not empty %}
                                {{ movie|trans_fallback('title') }}
                            {% else %}
                                {{ movie.titleVO }}
                            {% endif %}
                        </a>
                    </p>
                    {% for director in movie|film_function(constant('Base\\CoreBundle\\Entity\\FilmFunction::FUNCTION_DIRECTOR')) %}
                        <a class="director" href="{{ path('fdc_event_movie_get', {'slug': movie.slug}) }}">{{ director.fullName }}</a>
                        {% if loop.index != director|length %}
                            ,
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>