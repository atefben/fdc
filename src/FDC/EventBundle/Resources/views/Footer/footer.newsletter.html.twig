{% trans_default_domain 'FDCEventBundle' %}
<div class="newsletter">

    <form name="newsletter" id="newsletter" action="{{ path('fr__RG__fdc_event_footer_newsletter') }}" method="post" {{ form_enctype(newsform) }}>
        {{ form_widget(newsform.email, { 'id': 'email' }) }}
        <input id="submit" type="submit" name="submit" value="{{ 'footer.newsletter.btn.abonner'|trans }}">
        {{ form_rest(newsform) }}
    </form>

    <div id="confirmation">
        <p>{{ 'footer.newsletter.text.confirmation'|trans|raw }} <span id="newsletter-email"></span></p>
    </div>

</div>

<script type="text/javascript">

    $(document).ready(function(){

        $('#newsletter').submit( function( e ){
            e.preventDefault();

            $.ajax({
                type        : $(this).attr( 'method' ),
                url         : $(this).attr( 'action' ),
                data        : $(this).serialize(),
                success     : function(data) {
                    $('#newsletter').addClass('hide');
                    $('#confirmation').addClass('show');
                    $('#newsletter-email').html(data.success);
                }
            });

            return false;
        });

    });

</script>


