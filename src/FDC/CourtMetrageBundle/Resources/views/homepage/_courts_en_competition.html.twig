{% for movie in movies %}
    {% set media = movie.imageMain|trans_fallback('file') %}

    {% if media is empty %}
        {% set media = movie|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_POSTER'))|first %}
    {% endif %}
    {% if media is empty %}
        {% set media = movie|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_MAIN'))|first %}
    {% endif %}
    {% if media is empty %}
        {% set media = movie|film_media(constant('Base\\CoreBundle\\Entity\\FilmFilmMedia::TYPE_FILM'))|first %}
    {% endif %}
    {% if media is empty %}
        {% set media = movie.getSelfkitImages()|first %}
    {% endif %}

    <div class="item">
        <a href="{{ path('fdc_court_metrage_movie_show', {'slug': movie.slug}) }}"> <img src="{% path media, 'reference' %}" style="object-fit: cover; height: 284px;"></a>
        <div class="title">
            <a href="{{ path('fdc_court_metrage_movie_show', {'slug': movie.slug}) }}">
                {% if movie|trans_fallback_movie('title') != null and movie.titleVo != null and movie|trans_fallback_movie('title')|lower != movie.titleVo|lower %}
                    <h5>{{ movie.titleVo }}</h5>
                    <h6>({{ movie|trans_fallback_movie('title') }})</h6>
                {% else %}
                    <h5>{{ movie|trans_fallback('title')?:movie.titleVo }}</h5>
                {% endif %}
            </a>
            {% for director in movie.getDirectors() %}
                <a href="{{ path('fdc_court_metrage_artist', {'slug': director.person.slug}) }}">
                    <h4 class="author">{{ director.person.fullName|trim }}{{ loop.last == true ? '':', '}}</h4>
                </a>
            {% endfor %}
        </div>
    </div>
{% endfor %}
