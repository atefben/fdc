{% extends 'FDCCourtMetrageBundle::base.html.twig' %}

{% block main %}
    <div id="main" class="home loading eventsPage">
        <div class="list-article">
            <div class="bandeau-list">
                <div
                        class="bandeau-list-img bandeau-head vCenter subHeader eventsHeader"
                        style="background-image:url({% if program.getTranslatable().image %}{% path program.getTranslatable().image|trans_fallback('file'), 'reference' %}{% endif %})">
                    <h3>{{ program.title }}</h3>
                </div>
            </div>
        </div>


        {%  if program.body %}
            <div class="minPadding">
                <div class="container">
                    <h5 class="minMargin">{{ program.body }}</h5>
                </div>
            </div>
        {% endif %}

        <div class="bigContainer">
            <div id="accordion-conf" class="conferences">

                <div class="dropdown">
                    <span>{{ 'ccm.program.show'|trans }}</span>
                    <div id="eventSelector">
                        {% for filter in filters %}
                            <div class="selectText" id="filter-{{ filter.id }}">
                                {{ filter.title|title }}{% if loop.index < filters|length %},{% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <br>
                <div class="selector">
                    {% for filter in filters %}
                        <div class="selectbtn" id="selector-{{ filter.id }}" rel="filter-{{ filter.id }}">
                            {{ filter.title }}
                        </div>
                    {% endfor %}
                </div>
                <div class="conferencesMenu">
                    {% set beforeEvent = ("now"|date("Y-m-d") < (daysCollection|first).day.dateEvent|date("Y-m-d")) %}
                    <ul>
                        {% for dayCollection in daysCollection %}
                            <li class="{% if ("now"|date("Y-m-d") == dayCollection.day.dateEvent|date("Y-m-d")) or (beforeEvent and loop.index == 1)  %}open-selected-conf{% endif %}">
                                <div class="open">
                                    {{ dayCollection.day.dateEvent|date('Y-m-d') }}
                                    <span class="openPlus noDisplay">
                                        <i class="icon icon_creer"></i>
                                    </span>
                                    <span class="openMinus doDisplay"><i class="icon icon_moins"></i></span>
                                </div>
                                <div class="content firstContent">
                                    <div class="parent">
                                        <!-- The base class is the box. Categories are then given as accessory classes. Any div can be in more than one category -->
                                        {% for scheduleCollection in dayCollection.day.schedulesCollection %}
                                            <div class="box events selector-{{ scheduleCollection.schedule.scheduleType|trans_fallback('id') }}">
                                                <div class="conf10"><p>{{ scheduleCollection.schedule.scheduleType|trans_fallback('title') }}</p></div>
                                                <div class="conf60">
                                                    <h6 class="conf60title">{{ scheduleCollection.schedule|trans_fallback('title') }}</h6>
                                                    <span>{{ scheduleCollection.schedule|trans_fallback('title') }}</span>
                                                    <p>{{ scheduleCollection.schedule|trans_fallback('description')|raw }}</p>
                                                    {% if scheduleCollection.schedule|trans_fallback('url') %}
                                                        <a href="{{ scheduleCollection.schedule|trans_fallback('url') }}">
                                                            <div class="confButton">
                                                                <i class="icon icon_flecheGauche ensavoirplus"></i>
                                                                {{ 'ccm.program.see_more'|trans }}
                                                            </div>
                                                        </a>
                                                    {% endif %}
                                                </div>
                                                <div class="conf30">
                                                    <div>
                                                        <span>{{ 'ccm.program.access_type'|trans }}</span>
                                                        <p>{{ scheduleCollection.schedule|trans_fallback('accessType') }}</p>
                                                    </div>
                                                    <div>
                                                        <span>{{ 'ccm.program.time'|trans }}</span>
                                                        <p>{{ scheduleCollection.schedule|trans_fallback('timeDetails') }}</p>
                                                    </div>
                                                    <div>
                                                        <span>{{ 'ccm.program.location'|trans }}</span>
                                                        <p>{{ scheduleCollection.schedule|trans_fallback('location') }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
